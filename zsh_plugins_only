
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

# Install my theme "heist"
curl -o ~/.oh-my-zsh/themes/heist.zsh-theme https://raw.githubusercontent.com/sanek200000/Linux_sources/refs/heads/main/heist.zsh-theme
sed -i 's/\r$//' ~/.oh-my-zsh/themes/heist.zsh-theme

# echo aliaces to ~/.zshrc
if command -v lsd; then
	echo "alias ll='lsd -lAF --group-directories-first'" >> ~/.zshrc
else
	echo "alias ll='ls -lAF --group-directories-first'" >> ~/.zshrc
fi
if command -v duf; then
	echo "alias df='duf'" >> ~/.zshrc
fi
if command -v tldr; then
	echo "alias man='tldr'" >> ~/.zshrc
fi
if command -v btop; then
	echo "alias top='btop'" >> ~/.zshrc
fi
if command -v ranger; then
	echo "alias rr='ranger'" >> ~/.zshrc
	ranger --copy-config=all

	sed 's/^mime \^text,  label editor = ${VISUAL:-$EDITOR} -- "\$@"/mime \^text,  label editor = nano -- "\$@"/' $HOME/.config/ranger/rifle.conf > tmpfile && mv tmpfile $HOME/.config/ranger/rifle.conf
	sed 's/^set show_hidden false$/set show_hidden true/' $HOME/.config/ranger/rc.conf > tmpfile1 && mv tmpfile1 $HOME/.config/ranger/rc.conf
fi
echo "alias ee='nano -c'" >> ~/.zshrc
echo "alias h='history '" >> ~/.zshrc
echo "alias s='sudo '" >> ~/.zshrc
echo "alias cls='clear '" >> ~/.zshrc
echo "alias dcu='docker-compose up -d'" >> ~/.zshrc
echo "alias dcd='docker-compose down'" >> ~/.zshrc
echo "" >> ~/.zshrc
echo "" >> ~/.zshrc
echo "# History"
echo "setopt HIST_EXPIRE_DUPS_FIRST" >> ~/.zshrc
echo "setopt HIST_IGNORE_DUPS" >> ~/.zshrc
echo "setopt HIST_IGNORE_ALL_DUPS" >> ~/.zshrc
echo "setopt HIST_IGNORE_SPACE" >> ~/.zshrc
echo "setopt HIST_FIND_NO_DUPS" >> ~/.zshrc
echo "setopt HIST_SAVE_NO_DUPS" >> ~/.zshrc
echo "" >> ~/.zshrc



# Python code: add heist theme, add plugins
python3 -c "
import os

filename = os.path.expanduser('~/.zshrc')
my_theme='ZSH_THEME=\"heist\"'
new_plugins='plugins=( git zsh-syntax-highlighting zsh-autosuggestions )'

with open(filename, 'r') as f:
    lines = f.readlines()

for i, line in enumerate(lines):
    if line.startswith('ZSH_THEME='):
        lines[i] = f'# {line.strip()}\n{my_theme}\n'
    if line.startswith('plugins=('):
        lines[i] = f'# {line.strip()}\n{new_plugins}\n'

with open(filename, 'w') as f:
    f.writelines(lines)
"

# make ZSH grate again
if [ "$OS" = "Linux" ]; then
	chsh -s /usr/bin/zsh
else
	chsh -s /usr/local/bin/zsh
fi

echo 'End script'

zsh
